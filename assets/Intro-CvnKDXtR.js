import{j as e}from"./index-Iz3-uL73.js";import{r as s}from"./charts-vendor-7XZcGS5q.js";import{L as U,h as W,i as V,j as G,k as K,H as q,l as F}from"./icons-vendor-67J9wj48.js";import"./react-vendor-Bzgz95E1.js";const r=[{id:1,name:"扫腿舞",type:"image",media:"/material/saotuiwu.gif",audio:"/material/saotuiwu.mp3",title:"扫腿舞",subtitle:"RHYTHM & POWER",description:"团播间里最整齐划一的视觉盛宴"},{id:2,name:"九万字",type:"image",media:"/material/jiuwanzi.gif",audio:"/material/jiuwanzi.mp3",title:"九万字",subtitle:"NINETY THOUSAND WORDS",description:"虚拟与现实交织的赛博神话"},{id:3,name:"大展鸿图",type:"image",media:"/material/dazhanhongtu.gif",audio:"/material/dazhanhongtu.mp3",title:"大展鸿图",subtitle:"GRAND AMBITION",description:"气势磅礴"},{id:4,name:"落了白",type:"image",media:"/material/luoyebai.gif",audio:"/material/luolebai.mp3",title:"落了白",subtitle:"PURE WHITE",description:"唯美浪漫"},{id:5,name:"杀死比尔",type:"image",media:"/material/shasibier.gif",audio:"/material/shasibier.mp3",title:"杀死比尔",subtitle:"KILL BILL",description:"经典复刻"}],et=({onEnter:k})=>{const[E,T]=s.useState(!1),[i,S]=s.useState(!1),[n,P]=s.useState(!1),[u,L]=s.useState(0),[M,f]=s.useState(!0),[D,x]=s.useState(!1),[I,w]=s.useState([]),[d,b]=s.useState(0),y=s.useRef(0),h=s.useRef(null),l=s.useRef(null),v=s.useRef(0),j=s.useRef(0),p=r[u]||r[0];s.useEffect(()=>{const t=l.current;if(t){const o=r[0];t.src=o.audio,t.load()}},[]),s.useEffect(()=>{f(!0),x(!1);const t=l.current;t&&(t.src=p.audio,t.load(),i?t.play().catch(()=>{}):t.pause())},[u]),s.useEffect(()=>{const t=l.current;t&&(i?t.play().catch(()=>{}):t.pause())},[i]);const g=t=>{t<0||t>=r.length||(L(t),b(0))},R=()=>{g((u+1)%r.length)},z=()=>{g((u-1+r.length)%r.length)},C=t=>{t.stopPropagation(),S(!i)},O=t=>{t.stopPropagation(),P(!n)},A=()=>{l.current&&l.current.pause(),T(!0),setTimeout(k,800)},N=(t,o,a)=>{if(a&&m(a))return;const c=Date.now();c-y.current<300&&($(t,o),b(B=>B+1),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{b(0)},1500)),y.current=c},m=t=>t?!!(t.closest("button")||t.closest("a")||t.closest('[role="button"]')||t.onclick||t.getAttribute("onclick")):!1,Y=t=>{m(t.target)||N(t.clientX,t.clientY,t.target)},H=t=>{const o=t.target;if(m(o))return;v.current=t.targetTouches[0].clientX;const a=t.targetTouches[0];N(a.clientX,a.clientY,o)},X=t=>{if(m(t.target))return;j.current=t.changedTouches[0].clientX;const o=v.current-j.current;Math.abs(o)>50&&(o>0?R():z())},$=(t,o)=>{const a=Date.now();w(c=>[...c,{id:a,x:t,y:o,angle:Math.random()*30-15}]),setTimeout(()=>{w(c=>c.filter(_=>_.id!==a))},1e3)};return e.jsxs("div",{className:`fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center transition-transform duration-700 h-[100dvh] ${E?"-translate-y-full":"translate-y-0"}`,onTouchStart:H,onTouchEnd:X,onMouseDown:Y,children:[e.jsx("style",{children:`
        @keyframes spotlight-purple {
          0% { transform: rotate(20deg) scaleY(1.2); opacity: 0.5; }
          100% { transform: rotate(40deg) scaleY(1.5); opacity: 0.8; }
        }
        @keyframes spotlight-pink {
          0% { transform: rotate(-20deg) scaleY(1.2); opacity: 0.5; }
          100% { transform: rotate(-40deg) scaleY(1.5); opacity: 0.8; }
        }
        @keyframes float-heart {
          0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
          100% { transform: translate(-50%, -150%) scale(2) rotate(var(--rotate)); opacity: 0; }
        }
        @keyframes gif-pulse {
          0%, 100% { filter: brightness(1.1) contrast(1.1) saturate(1.2); }
          50% { filter: brightness(1.3) contrast(1.2) saturate(1.5); }
        }
        /* 强力闪烁动画 - 用于提示开启灯光 */
        @keyframes button-flash {
          0%, 100% { transform: scale(1); box-shadow: 0 0 5px rgba(255,255,255,0.1); border-color: rgba(148,163,184,0.5); }
          50% { transform: scale(1.15); box-shadow: 0 0 25px rgba(255,255,255,0.6); border-color: rgba(255,255,255,0.9); background-color: rgba(255,255,255,0.15); }
        }
        @keyframes combo-bounce {
          0% { transform: scale(0.5); opacity: 0; }
          50% { transform: scale(1.2); opacity: 1; }
          100% { transform: scale(1); opacity: 1; }
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      `}),e.jsx("audio",{ref:l,loop:!0,playsInline:!0,autoPlay:!0,onError:()=>console.error("Audio load error")}),e.jsxs("div",{className:"absolute top-4 right-4 z-50 pt-[env(safe-area-inset-top)] flex gap-3 pointer-events-auto",children:[e.jsx("button",{onClick:O,onTouchStart:t=>t.stopPropagation(),onTouchEnd:t=>t.stopPropagation(),onMouseDown:t=>t.stopPropagation(),className:`p-2.5 md:p-3 rounded-full backdrop-blur-md border shadow-lg transition-all ${n?"bg-fuchsia-900/80 border-fuchsia-500 text-fuchsia-100 shadow-[0_0_20px_rgba(236,72,153,0.4)]":"bg-slate-900/60 text-yellow-200 animate-[button-flash_1.5s_ease-in-out_infinite]"}`,children:n?e.jsx(U,{className:"w-5 h-5 md:w-6 md:h-6"}):e.jsx(W,{className:"w-5 h-5 md:w-6 md:h-6"})}),e.jsx("button",{onClick:C,onTouchStart:t=>t.stopPropagation(),onTouchEnd:t=>t.stopPropagation(),onMouseDown:t=>t.stopPropagation(),className:`p-2.5 md:p-3 rounded-full backdrop-blur-md border shadow-lg transition-all ${i?"bg-purple-900/80 border-purple-500 text-purple-100 shadow-[0_0_20px_rgba(168,85,247,0.4)]":"bg-black/60 border-slate-700 text-slate-500"}`,children:i?e.jsx(V,{className:"w-5 h-5 md:w-6 md:h-6"}):e.jsx(G,{className:"w-5 h-5 md:w-6 md:h-6"})})]}),e.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none overflow-hidden bg-black flex items-center justify-center",children:[M&&!D&&e.jsx("div",{className:"absolute z-10 flex flex-col items-center gap-2 text-slate-500",children:e.jsx(K,{className:"w-8 h-8 animate-spin"})}),e.jsx("div",{className:"absolute inset-0 animate-[fadeIn_0.5s_ease-out]",children:e.jsx("img",{src:p.media,alt:p.title,onLoad:()=>f(!1),onError:()=>{x(!0),f(!1)},className:`w-full h-full object-cover transition-all duration-700 ${n?"opacity-100 brightness-100 saturate-120":"opacity-80 brightness-75 saturate-50"}`,style:{animation:n?"gif-pulse 0.8s infinite alternate":"none"}})},p.id),n&&e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-20%] left-[10%] w-[60%] h-[150%] origin-top mix-blend-color-dodge bg-gradient-to-b from-purple-600 via-purple-900/50 to-transparent blur-[80px] animate-[spotlight-purple_3s_infinite_alternate]"}),e.jsx("div",{className:"absolute top-[-20%] right-[10%] w-[60%] h-[150%] origin-top mix-blend-color-dodge bg-gradient-to-b from-pink-600 via-fuchsia-900/50 to-transparent blur-[80px] animate-[spotlight-pink_3.5s_infinite_alternate]"}),e.jsx("div",{className:"absolute top-0 inset-x-0 h-40 bg-gradient-to-b from-fuchsia-900/40 to-transparent blur-2xl"})]}),!n&&e.jsx("div",{className:"absolute inset-0 bg-black/60 transition-all duration-700"}),I.map(t=>e.jsx("div",{className:"absolute pointer-events-none z-50",style:{left:t.x,top:t.y,"--rotate":`${t.angle}deg`},children:e.jsx("div",{className:"animate-[float-heart_0.8s_ease-out_forwards]",children:e.jsx(q,{className:"w-20 h-20 text-pink-500 fill-pink-500 drop-shadow-[0_0_15px_rgba(236,72,153,1)]"})})},t.id)),d>1&&e.jsx("div",{className:"absolute top-1/2 right-6 -translate-y-1/2 z-50 pointer-events-none flex flex-col items-center w-max",children:e.jsxs("div",{className:"animate-[combo-bounce_0.3s_cubic-bezier(0.175,0.885,0.32,1.275)] flex flex-col items-center",children:[e.jsx("div",{className:"text-2xl md:text-4xl font-black italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 via-orange-500 to-red-600 drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)] pr-4",style:{textShadow:"0 0 20px rgba(234, 88, 12, 0.8)"},children:"COMBO"}),e.jsxs("div",{className:"text-4xl md:text-5xl font-black text-white italic drop-shadow-[0_4px_0_rgba(0,0,0,1)] flex items-center gap-2 pr-2",children:[e.jsx("span",{className:"text-yellow-400",children:"x"}),d]}),d>5&&e.jsx("div",{className:"text-[10px] md:text-xs font-bold text-pink-300 animate-pulse mt-2 uppercase tracking-widest bg-black/50 px-2 py-1 rounded",children:"Unstoppable!"})]},d)})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 pb-[env(safe-area-inset-bottom)] flex flex-col items-center bg-gradient-to-t from-black via-black/90 to-transparent pt-20 pointer-events-none",children:[e.jsx("div",{className:"w-full mb-6 pointer-events-auto",children:e.jsxs("div",{className:"flex overflow-x-auto no-scrollbar px-4 gap-2 snap-x",children:[r.map((t,o)=>e.jsx("button",{onClick:a=>{a.stopPropagation(),g(o)},onTouchStart:a=>a.stopPropagation(),onTouchEnd:a=>a.stopPropagation(),onMouseDown:a=>a.stopPropagation(),className:`snap-center shrink-0 px-3 py-1.5 rounded-full text-xs font-bold transition-all whitespace-nowrap border ${u===o?"bg-fuchsia-900/80 border-fuchsia-500 text-white shadow-[0_0_10px_rgba(236,72,153,0.3)]":"bg-slate-900/50 border-slate-700 text-slate-400 hover:text-slate-200"}`,children:t.name},t.id)),e.jsx("div",{className:"w-2 shrink-0"})]})}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),A()},onTouchStart:t=>t.stopPropagation(),onTouchEnd:t=>t.stopPropagation(),onMouseDown:t=>t.stopPropagation(),className:"pointer-events-auto w-36 md:w-40 py-3 bg-white/5 backdrop-blur-md border border-white/10 rounded-full font-bold text-sm text-white mb-8 active:scale-95 transition-transform flex items-center justify-center gap-2 hover:bg-white/10",children:["点击揭秘 ",e.jsx(F,{className:"w-5 h-5"})]})]})]})};export{et as Intro};
